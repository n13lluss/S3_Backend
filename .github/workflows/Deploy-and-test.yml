    name: .NET Deployment

    on:
        push:
            branches: [ "master" ]
        pull_request:
            branches: [ "master" ]

    jobs:
        build:
            runs-on: ubuntu-latest
            environment: production
            steps:
                - uses: actions/checkout@v4
                - name: Setup .NET
                  uses: actions/setup-dotnet@v4
                  with:
                      dotnet-version: 8.0.x
                - name: Restore dependencies
                  run: dotnet restore TravelblogBackend.sln
                - name: Ensure publish directory exists
                  run: mkdir -p publish/
                - name: Build Release
                  run: dotnet build Travelblog.Api/Travelblog.Api.csproj --configuration Release --framework net8.0 --output publish/

        test:
            runs-on: ubuntu-latest
            needs: build
            steps:
                - uses: actions/checkout@v4
                - name: Setup .NET
                  uses: actions/setup-dotnet@v4
                  with:
                      dotnet-version: 8.0.x
                - name: Restore dependencies
                  run: dotnet restore TravelblogBackend.sln
                - name: Test
                  run: dotnet test Travelblog.Unittest/Travelblog.Unittest.csproj --verbosity normal

        # deploy:
        #     runs-on: ubuntu-latest
        #     needs: [build, test]
        #     steps:
        #         - uses: actions/checkout@v4
        #         - name: Setup .NET
        #           uses: actions/setup-dotnet@v4
        #           with:
        #               dotnet-version: 8.0.x
        #         - name: Restore dependencies
        #           run: dotnet restore TravelblogBackend.sln
        #         - name: Ensure publish directory exists
        #           run: mkdir -p publish/
        #         - name: Build Release for deployment
        #           run: dotnet build Travelblog.Api/Travelblog.Api.csproj --configuration Release --framework net8.0 --output publish/
        #         - name: ðŸ“‚ Sync files
        #           uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        #           with:
        #                 server: ${{ secrets.FTP_SERVER }}
        #                 username: ${{ secrets.FTP_USERNAME }}
        #                 password: ${{ secrets.FTP_PASSWORD }}
        #                 server-dir: '/domains/i427798.luna.fhict.nl/'
        #                 port: 21
        #                 protocol: ftps
                        # local-dir: publish/runtimes/win-x64/


